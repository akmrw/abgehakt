(()=>{var k=(p,r)=>()=>(r||p((r={exports:{}}).exports,r),r.exports);var C=k((I,B)=>{B.exports={BIN_ID:"6825827b8561e97a50143be1",API_KEY:"$2a$10$rmvKCTl1GBAmqLEtwmbEJOfXrcOSeHQl1OlTaDEEPhyOOgh0RK6x6",BIN_URL:"https://api.jsonbin.io/v3/b/6825827b8561e97a50143be1"}});var h=C(),c=[],l;document.addEventListener("DOMContentLoaded",()=>{let p=document.getElementById("listLoader"),r=document.getElementById("entryContainer");p.innerHTML='<p id="listHeader">Deine Listen</p><div id="listContainer"></div>';let L=document.getElementById("listContainer");fetch(h.BIN_URL,{headers:{"X-Master-Key":h.API_KEY}}).then(e=>e.json()).then(e=>{c=e.record,E()});function E(){L.innerHTML="",c.forEach(e=>{let t=document.createElement("button");t.textContent=e.name,t.id=`list_${e.id}`,t.addEventListener("click",()=>{f(e)}),L.appendChild(t)}),l=document.createElement("form"),l.innerHTML=`
          <input type="text" id="newListName" placeholder="Neue Liste..." required>
          <button type="submit">Liste hinzuf\xFCgen</button>
        `,l.addEventListener("submit",e=>{e.preventDefault();let t=l.querySelector("#newListName").value.trim();if(!t)return;let d={id:y(),name:t,entries:[]};c.push(d),u(c),E(),l.reset()}),L.appendChild(l)}function f(e){r.innerHTML=`<h2>${e.name}</h2><ul></ul>`;let t=r.querySelector("ul");e.entries.forEach(n=>{let o=document.createElement("li"),s=document.createElement("input");s.type="checkbox",s.id=`entry_${n.id}`,s.checked=!n.active;let a=document.createElement("label");a.htmlFor=s.id,a.textContent=n.name,o.appendChild(s),o.appendChild(a),t.appendChild(o),s.addEventListener("change",()=>{o.classList.toggle("checked",s.checked);let g=c.find(b=>b.id===e.id).entries.find(b=>b.id===n.id);g.active=!s.checked,u(c)})}),v(e,t);let d=document.createElement("button");d.textContent="\u{1F5D1} Liste l\xF6schen",d.className="delete-button",d.addEventListener("click",()=>{confirm("Diese Liste wirklich l\xF6schen?")&&(c=c.filter(n=>n.id!==e.id),u(c),r.innerHTML="",E())}),r.appendChild(d);let i=document.createElement("button");i.textContent="\u2714 Abgehakte Eintr\xE4ge entfernen",i.className="clear-checked-button",i.addEventListener("click",()=>{let n=c.find(o=>o.id===e.id);n.entries=n.entries.filter(o=>o.active),u(c),f(n)}),r.appendChild(i)}function v(e,t){let d=document.createElement("li");d.classList.add("dummy-entry");let i=document.createElement("input");i.type="text",i.placeholder="Neuen Eintrag hinzuf\xFCgen...",i.classList.add("dummy-input");let n=document.createElement("button");n.textContent="\u{1F4BE}",n.classList.add("save-button"),i.addEventListener("input",()=>{n.style.display=i.value.trim()?"inline-block":"none"}),n.addEventListener("click",()=>{let o=i.value.trim();if(!o)return;let s={id:y(),name:o,active:!0},a=c.find(m=>m.id===e.id);a.entries.push(s),u(c),f(a),setTimeout(()=>{let m=r.querySelector("ul li:last-child input[type='text']");m&&m.focus()},100)}),d.appendChild(i),d.appendChild(n),t.appendChild(d),setTimeout(()=>i.focus(),100)}function u(e){fetch(h.BIN_URL,{method:"PUT",headers:{"Content-Type":"application/json","X-Master-Key":h.API_KEY,"X-Bin-Versioning":!1},body:JSON.stringify(e)}).then(t=>t.json()).then(t=>{console.log("Speichern erfolgreich:",t)}).catch(t=>{console.error("Fehler beim Speichern:",t)})}function y(){return"_"+Math.random().toString(36).substr(2,9)}});})();
