(()=>{var _=(C,c)=>()=>(c||C((c={exports:{}}).exports,c),c.exports);var w=_((K,N)=>{N.exports={BIN_ID:"6825827b8561e97a50143be1",API_KEY:"$2a$10$rmvKCTl1GBAmqLEtwmbEJOfXrcOSeHQl1OlTaDEEPhyOOgh0RK6x6",BIN_URL:"https://api.jsonbin.io/v3/b/6825827b8561e97a50143be1"}});var b=w(),i=[],y=null;document.addEventListener("DOMContentLoaded",()=>{let C=document.getElementById("listLoader"),c=document.getElementById("entryContainer");C.innerHTML=`
    <div id="listHeader">
        <h2>Deine Listen</h2>
        <button id="addListButton">+</button>
    </div>
    <div id="listContainer">
        <!-- Dynamisch erzeugte Buttons f\xFCr jede Liste -->
    </div>
    `,document.getElementById("addListButton").addEventListener("click",()=>{let e=prompt("Wie soll die neue Liste hei\xDFen?");if(e&&e.trim()){let n={id:Date.now(),name:e.trim(),entries:[]};i.push(n),E(i),y=n.id,f(),p(n,!0)}});let I=document.getElementById("listContainer");fetch(b.BIN_URL,{headers:{"X-Master-Key":b.API_KEY}}).then(e=>e.json()).then(e=>{i=e.record,f()});function f(){I.innerHTML="",i.forEach(e=>{let n=document.createElement("button");n.textContent=e.name,n.id=`list_${e.id}`,e.id===y&&n.classList.add("active"),n.addEventListener("click",()=>{y=e.id,p(e,!1),f()}),I.appendChild(n)})}function p(e,n=!1){c.innerHTML=`<h2>${e.name}</h2><ul></ul>`;let s=c.querySelector("ul"),m=e.entries.filter(t=>t.active),d=e.entries.filter(t=>!t.active);function o(t){let r=document.createElement("li"),a=document.createElement("input");a.type="checkbox",a.id=`entry_${t.id}`,a.checked=!t.active;let g=document.createElement("label");return g.htmlFor=a.id,g.textContent=t.name,r.appendChild(a),r.appendChild(g),r.classList.toggle("checked",a.checked),a.addEventListener("change",()=>{let v=i.find(B=>B.id===e.id),T=v.entries.find(B=>B.id===t.id);T.active=!a.checked,E(i),p(v)}),r.addEventListener("click",v=>{v.target===r&&a.click()}),r}if(m.forEach(t=>{s.appendChild(o(t))}),d.length>0){let t=document.createElement("hr");s.appendChild(t)}d.forEach(t=>{s.appendChild(o(t))});let l=document.createElement("hr");s.appendChild(l),D(e,s,n);let k=document.createElement("hr");s.appendChild(k);let u=document.createElement("div");u.className="button-row";let h=document.createElement("button");h.textContent="\u2714 Abgehakte l\xF6schen",h.className="clear-checked-button",h.addEventListener("click",()=>{if(confirm("Wirklich alle abgehakten Eintr\xE4ge l\xF6schen?")){let t=i.find(r=>r.id===e.id);t.entries=t.entries.filter(r=>r.active),E(i),p(t,!1)}});let L=document.createElement("button");L.textContent="Liste l\xF6schen \u{1F5D1}",L.className="delete-button",L.addEventListener("click",()=>{confirm("Diese Liste wirklich l\xF6schen?")&&(i=i.filter(t=>t.id!==e.id),E(i),c.innerHTML="",c.classList.add("hidden"),y=null,f())}),u.appendChild(h),u.appendChild(L),c.appendChild(u),c.classList.remove("hidden")}function D(e,n,s=!1){let m=document.createElement("li");m.classList.add("dummy-entry");let d=document.createElement("input");d.type="text",d.placeholder="Neuen Eintrag hinzuf\xFCgen...",d.classList.add("dummy-input");let o=document.createElement("button");o.textContent="\u{1F4BE}",o.classList.add("save-entry-button"),d.addEventListener("input",()=>{o.style.display=d.value.trim()?"inline-block":"none"}),d.addEventListener("keydown",l=>{l.key==="Enter"&&(l.preventDefault(),o.click())}),o.addEventListener("click",()=>{let l=d.value.trim();if(!l)return;let k={id:x(),name:l,active:!0},u=i.find(h=>h.id===e.id);u.entries.push(k),E(i),p(u,!0)}),m.appendChild(d),m.appendChild(o),n.appendChild(m),s&&setTimeout(()=>d.focus(),100)}function E(e){fetch(b.BIN_URL,{method:"PUT",headers:{"Content-Type":"application/json","X-Master-Key":b.API_KEY,"X-Bin-Versioning":!1},body:JSON.stringify(e)}).then(n=>n.json()).then(n=>{console.log("Speichern erfolgreich:",n)}).catch(n=>{console.error("Fehler beim Speichern:",n)})}function x(){return"_"+Math.random().toString(36).substr(2,9)}});})();
