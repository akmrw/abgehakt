(()=>{var g=(h,r)=>()=>(r||h((r={exports:{}}).exports,r),r.exports);var v=g((I,B)=>{B.exports={BIN_ID:"6825827b8561e97a50143be1",API_KEY:"$2a$10$rmvKCTl1GBAmqLEtwmbEJOfXrcOSeHQl1OlTaDEEPhyOOgh0RK6x6",BIN_URL:"https://api.jsonbin.io/v3/b/6825827b8561e97a50143be1"}});var m=v(),o=[];document.addEventListener("DOMContentLoaded",()=>{let h=document.getElementById("listLoader"),r=document.getElementById("entryContainer");h.innerHTML='<p id="listHeader">Deine Listen</p><div id="listContainer"></div>';let p=document.getElementById("listContainer");fetch(m.BIN_URL,{headers:{"X-Master-Key":m.API_KEY}}).then(t=>t.json()).then(t=>{o=t.record,E()});function E(){p.innerHTML="",o.forEach(t=>{let e=document.createElement("button");e.textContent=t.name,e.id=`list_${t.id}`,e.addEventListener("click",()=>{L(t)}),p.appendChild(e)}),C()}function L(t){r.innerHTML=`<h2>${t.name}</h2><ul></ul>`;let e=r.querySelector("ul");t.entries.forEach(i=>{let d=document.createElement("li"),s=document.createElement("input");s.type="checkbox",s.id=`entry_${i.id}`,s.checked=!i.active;let a=document.createElement("label");a.htmlFor=s.id,a.textContent=i.name,d.appendChild(s),d.appendChild(a),e.appendChild(d),s.addEventListener("change",()=>{d.classList.toggle("checked",s.checked);let k=o.find(f=>f.id===t.id).entries.find(f=>f.id===i.id);k.active=!s.checked,l(o)})}),b(t,e);let c=document.createElement("button");c.textContent="\u{1F5D1} Liste l\xF6schen",c.className="delete-button",c.addEventListener("click",()=>{confirm("Diese Liste wirklich l\xF6schen?")&&(o=o.filter(i=>i.id!==t.id),l(o),r.innerHTML="",E())}),r.appendChild(c);let n=document.createElement("button");n.textContent="\u2714 Abgehakte Eintr\xE4ge entfernen",n.className="clear-checked-button",n.addEventListener("click",()=>{let i=o.find(d=>d.id===t.id);i.entries=i.entries.filter(d=>d.active),l(o),L(i)}),r.appendChild(n)}function b(t,e){let c=document.createElement("li");c.classList.add("dummy-entry");let n=document.createElement("input");n.type="text",n.placeholder="Neuen Eintrag hinzuf\xFCgen...",n.classList.add("dummy-input");let i=document.createElement("button");i.textContent="\u{1F4BE}",i.classList.add("save-entry-button"),n.addEventListener("input",()=>{i.style.display=n.value.trim()?"inline-block":"none"}),n.addEventListener("keydown",d=>{d.key==="Enter"&&(d.preventDefault(),i.click())}),i.addEventListener("click",()=>{let d=n.value.trim();if(!d)return;let s={id:y(),name:d,active:!0},a=o.find(u=>u.id===t.id);a.entries.push(s),l(o),L(a),setTimeout(()=>{let u=r.querySelector("ul li:last-child input[type='text']");u&&u.focus()},100)}),c.appendChild(n),c.appendChild(i),e.appendChild(c),setTimeout(()=>n.focus(),100)}function C(){let t=document.createElement("div");t.classList.add("dummy-list");let e=document.createElement("input");e.type="text",e.placeholder="Neue Liste hinzuf\xFCgen...";let c=document.createElement("button");c.textContent="\u{1F4BE}",c.classList.add("save-list-button"),e.addEventListener("input",()=>{c.style.display=e.value.trim()?"inline-block":"none"}),e.addEventListener("keydown",n=>{n.key==="Enter"&&(n.preventDefault(),c.click())}),c.addEventListener("click",()=>{let n=e.value.trim();if(!n)return;let i={id:y(),name:n,entries:[]};o.push(i),l(o),E()}),t.appendChild(e),t.appendChild(c),p.appendChild(t),setTimeout(()=>e.focus(),100)}function l(t){fetch(m.BIN_URL,{method:"PUT",headers:{"Content-Type":"application/json","X-Master-Key":m.API_KEY,"X-Bin-Versioning":!1},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{console.log("Speichern erfolgreich:",e)}).catch(e=>{console.error("Fehler beim Speichern:",e)})}function y(){return"_"+Math.random().toString(36).substr(2,9)}});})();
