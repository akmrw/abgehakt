(()=>{var C=(p,s)=>()=>(s||p((s={exports:{}}).exports,s),s.exports);var b=C((w,B)=>{B.exports={BIN_ID:"6825827b8561e97a50143be1",API_KEY:"$2a$10$rmvKCTl1GBAmqLEtwmbEJOfXrcOSeHQl1OlTaDEEPhyOOgh0RK6x6",BIN_URL:"https://api.jsonbin.io/v3/b/6825827b8561e97a50143be1"}});var h=b(),o=[];document.addEventListener("DOMContentLoaded",()=>{let p=document.getElementById("listLoader"),s=document.getElementById("entryContainer");p.innerHTML=`
    <div id="listHeader">
        <h2>Deine Listen</h2>
        <button id="addListButton">+</button>
    </div>
    <div id="listContainer">
        <!-- Dynamisch erzeugte Buttons f\xFCr jede Liste -->
    </div>
    `,document.getElementById("addListButton").addEventListener("click",()=>{let e=prompt("Wie soll die neue Liste hei\xDFen?");if(e&&e.trim()){let t={id:Date.now(),name:e.trim(),entries:[]};o.push(t),u(o),L(),m(t)}});let f=document.getElementById("listContainer");fetch(h.BIN_URL,{headers:{"X-Master-Key":h.API_KEY}}).then(e=>e.json()).then(e=>{o=e.record,L()});function L(){f.innerHTML="",o.forEach(e=>{let t=document.createElement("button");t.textContent=e.name,t.id=`list_${e.id}`,t.addEventListener("click",()=>{m(e)}),f.appendChild(t)})}function m(e){s.innerHTML=`<h2>${e.name}</h2><ul></ul>`;let t=s.querySelector("ul");e.entries.forEach(n=>{let c=document.createElement("li"),d=document.createElement("input");d.type="checkbox",d.id=`entry_${n.id}`,d.checked=!n.active;let l=document.createElement("label");l.htmlFor=d.id,l.textContent=n.name,c.appendChild(d),c.appendChild(l),t.appendChild(c),c.classList.toggle("checked",d.checked),d.addEventListener("change",()=>{c.classList.toggle("checked",d.checked);let g=o.find(E=>E.id===e.id).entries.find(E=>E.id===n.id);g.active=!d.checked,u(o)}),c.addEventListener("click",y=>{y.target===c&&d.click()})}),v(e,t);let a=document.createElement("div");a.className="button-row";let i=document.createElement("button");i.textContent="\u2714 Abgehakte l\xF6schen",i.className="clear-checked-button",i.addEventListener("click",()=>{if(confirm("Wirklich alle abgehakten Eintr\xE4ge l\xF6schen?")){let n=o.find(c=>c.id===e.id);n.entries=n.entries.filter(c=>c.active),u(o),m(n)}});let r=document.createElement("button");r.textContent="Liste l\xF6schen \u{1F5D1}",r.className="delete-button",r.addEventListener("click",()=>{confirm("Diese Liste wirklich l\xF6schen?")&&(o=o.filter(n=>n.id!==e.id),u(o),s.innerHTML="",s.classList.add("hidden"),L())}),a.appendChild(i),a.appendChild(r),s.appendChild(a),s.classList.remove("hidden")}function v(e,t){let a=document.createElement("li");a.classList.add("dummy-entry");let i=document.createElement("input");i.type="text",i.placeholder="Neuen Eintrag hinzuf\xFCgen...",i.classList.add("dummy-input");let r=document.createElement("button");r.textContent="\u{1F4BE}",r.classList.add("save-entry-button"),i.addEventListener("input",()=>{r.style.display=i.value.trim()?"inline-block":"none"}),i.addEventListener("keydown",n=>{n.key==="Enter"&&(n.preventDefault(),r.click())}),r.addEventListener("click",()=>{let n=i.value.trim();if(!n)return;let c={id:k(),name:n,active:!0},d=o.find(l=>l.id===e.id);d.entries.push(c),u(o),m(d),setTimeout(()=>{let l=s.querySelector("ul li:last-child input[type='text']");l&&l.focus()},100)}),a.appendChild(i),a.appendChild(r),t.appendChild(a),setTimeout(()=>i.focus(),100)}function u(e){fetch(h.BIN_URL,{method:"PUT",headers:{"Content-Type":"application/json","X-Master-Key":h.API_KEY,"X-Bin-Versioning":!1},body:JSON.stringify(e)}).then(t=>t.json()).then(t=>{console.log("Speichern erfolgreich:",t)}).catch(t=>{console.error("Fehler beim Speichern:",t)})}function k(){return"_"+Math.random().toString(36).substr(2,9)}});})();
