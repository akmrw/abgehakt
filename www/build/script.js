(()=>{var g=(h,d)=>()=>(d||h((d={exports:{}}).exports,d),d.exports);var y=g((I,k)=>{k.exports={BIN_ID:"6825827b8561e97a50143be1",API_KEY:"$2a$10$rmvKCTl1GBAmqLEtwmbEJOfXrcOSeHQl1OlTaDEEPhyOOgh0RK6x6",BIN_URL:"https://api.jsonbin.io/v3/b/6825827b8561e97a50143be1"}});var m=y(),o=[];document.addEventListener("DOMContentLoaded",()=>{let h=document.getElementById("listLoader"),d=document.getElementById("entryContainer");h.innerHTML='<p id="listHeader">Deine Listen</p><div id="listContainer"></div>';let f=document.getElementById("listContainer");fetch(m.BIN_URL,{headers:{"X-Master-Key":m.API_KEY}}).then(e=>e.json()).then(e=>{o=e.record,L()});function L(){f.innerHTML="",o.forEach(e=>{let n=document.createElement("button");n.textContent=e.name,n.id=`list_${e.id}`,n.addEventListener("click",()=>{p(e)}),f.appendChild(n)})}function p(e){d.innerHTML=`<h2>${e.name}</h2><ul></ul>`;let n=d.querySelector("ul");e.entries.forEach(t=>{let c=document.createElement("li"),r=document.createElement("input");r.type="checkbox",r.id=`entry_${t.id}`,r.checked=!t.active;let a=document.createElement("label");a.htmlFor=r.id,a.textContent=t.name,c.appendChild(r),c.appendChild(a),n.appendChild(c),r.addEventListener("change",()=>{c.classList.toggle("checked",r.checked);let v=o.find(E=>E.id===e.id).entries.find(E=>E.id===t.id);v.active=!r.checked,u(o)})}),b(e,n);let s=document.createElement("button");s.textContent="\u{1F5D1} Liste l\xF6schen",s.className="delete-button",s.addEventListener("click",()=>{confirm("Diese Liste wirklich l\xF6schen?")&&(o=o.filter(t=>t.id!==e.id),u(o),d.innerHTML="",L())}),d.appendChild(s);let i=document.createElement("button");i.textContent="\u2714 Abgehakte Eintr\xE4ge entfernen",i.className="clear-checked-button",i.addEventListener("click",()=>{let t=o.find(c=>c.id===e.id);t.entries=t.entries.filter(c=>c.active),u(o),p(t)}),d.appendChild(i)}function b(e,n){let s=document.createElement("li");s.classList.add("dummy-entry");let i=document.createElement("input");i.type="text",i.placeholder="Neuen Eintrag hinzuf\xFCgen...",i.classList.add("dummy-input");let t=document.createElement("button");t.textContent="\u{1F4BE}",t.classList.add("save-entry-button"),i.addEventListener("input",()=>{t.style.display=i.value.trim()?"inline-block":"none"}),i.addEventListener("keydown",c=>{c.key==="Enter"&&(c.preventDefault(),t.click())}),t.addEventListener("click",()=>{let c=i.value.trim();if(!c)return;let r={id:C(),name:c,active:!0},a=o.find(l=>l.id===e.id);a.entries.push(r),u(o),p(a),setTimeout(()=>{let l=d.querySelector("ul li:last-child input[type='text']");l&&l.focus()},100)}),s.appendChild(i),s.appendChild(t),n.appendChild(s),setTimeout(()=>i.focus(),100)}function u(e){fetch(m.BIN_URL,{method:"PUT",headers:{"Content-Type":"application/json","X-Master-Key":m.API_KEY,"X-Bin-Versioning":!1},body:JSON.stringify(e)}).then(n=>n.json()).then(n=>{console.log("Speichern erfolgreich:",n)}).catch(n=>{console.error("Fehler beim Speichern:",n)})}function C(){return"_"+Math.random().toString(36).substr(2,9)}});})();
